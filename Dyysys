import requests,re,telebot

from telebot import types

#This Bot For Free By @s_l_3 - @c_p_8

token = input('5645705707:AAGrD542Ba2PGeI7s_pI4w93gpjzT_4x_Vc')

bot = telebot.TeleBot(token)

#Ø§Ù„Ø§Ù†Ù„Ø§ÙŠÙ†

startbot = types.InlineKeyboardButton(text='- Ø¨Ø­Ø« Ø¹Ù† Ø³ÙŠØ§Ø±Ù‡ .',callback_data='startbo')

@bot.message_handler(commands=['start'])

def start(message):

	key = types.InlineKeyboardMarkup()	key.add(startbot)

	bot.send_message(message.chat.id,'<strong>- Ù‡Ù„Ø§ Ø¨ÙŠÙƒ Ø­Ø¨ Ù‡Ø§Ø°Ø§ Ø¨ÙˆØª Ù…Ø®ØªØµ Ø§Ù†Ùˆ ÙŠØ·Ù„Ø¹Ù„Ùƒ ØºØ±Ø§Ù…Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¹Ø±Ø§Ù‚ \nÙˆÙ‡Ø³Ù‡ Ø¯Ø² Ø±Ù‚Ù… Ø§Ù„Ù„ÙˆØ­Ù‡ Ù…Ø§Ù„Øª Ø§Ù„Ø³ÙŠØ§Ø±Ù‡\nÙ…Ù„Ø§Ø­Ø¶Ù‡ : Ø§Ù„Ø¨ÙˆØª ÙŠØ¹Ù…Ù„ Ù…Ø¹ Ø§Ù„Ù„ÙˆØ­Ø§Øª Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠÙ‡ ÙÙ‚Ø· .</strong>',parse_mode='html',reply_markup=key)

@bot.callback_query_handler(func=lambda call:True)

def qwewewe(call):

	if call.data == 'startbo':

		getnumbercar(call.message)

#This Bot For Free By @s_l_3 - @c_p_8

def getnumbercar(message):

	coder = bot.edit_message_text(chat_id=message.chat.id,message_id=message.message_id,text=f'<strong>- Ù‡Ø³Ù‡ Ø¯Ø² Ø±Ù‚Ù… Ø§Ù„Ù„ÙˆØ­Ù‡ Ø¨Ø³ .</strong>',parse_mode='html')

	bot.register_next_step_handler(coder,getnamecar)

def getnamecar(message):

	global numbercar

	numbercar = message.text

	send = bot.send_message(message.chat.id,f'''<strong>ØªÙ…Ø§Ù… Ø­ÙŠØ§ØªÙŠ Ø§Ù†Øª Ø¯Ø®Ù„Øª Ø±Ù‚Ù… Ø§Ù„Ù„ÙˆØ­Ù‡( {numbercar} ) Ù„Ù„Ø³ÙŠØ§Ø±Ù‡ .

- Ù‡Ø³Ù‡ Ø§Ø®ØªØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠØ§Ø±Ù‡ Ù…Ù„Ø§Ø­Ø¶Ù‡ : Ø§ÙƒØªØ¨ Ø§Ù„Ø±Ù‚Ù… Ø¨Ø³ Ø¨Ø³ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø¹ÙˆÙÙ‡Ù† Ø°Ù† Ø¨Ø³ ØªØ¹Ø±ÙŠÙ .

1 - ( Ø³ÙŠØ§Ø±Ù‡ Ø®ØµÙˆØµÙŠÙ‡ ) .

2 - ( Ø³ÙŠØ§Ø±Ù‡ ÙØ­Øµ Ù…Ø¤Ù‚Øª ) .

3 - ( Ø³ÙŠØ§Ø±Ù‡ ØªÙƒØ³ÙŠ ) .

4 - ( Ø³ÙŠØ§Ø±Ù‡ Ø­Ù…Ù„ ) .

5 - ( Ø³ÙŠØ§Ø±Ù‡ Ø²Ø±Ø§Ø¹Ù‡ ) .

- 6 ( Ø³ÙŠØ§Ø±Ù‡ Ø§Ù†Ø´Ø§Ø¦ÙŠÙ‡ ) .

- 7 ( Ø¯Ø±Ø§Ø¬Ø§Øª ) .

- 8 Ø³ÙŠØ§Ø±Ù‡ Ø­ÙƒÙˆÙ…ÙŠÙ‡</strong>''',parse_mode='html')

	bot.register_next_step_handler(send,getnumberclass)

	

def getnumberclass(message):

	global typecar

	numberclass = message.text

	if numberclass == '1':

		typecar = 'Ø³ÙŠØ§Ø±Ù‡ Ø®ØµÙˆØµÙŠÙ‡'

	if numberclass == '2':	

		typecar = 'Ø³ÙŠØ§Ø±Ù‡ ÙØ­Øµ Ù…Ø¤Ù‚Øª'

	if numberclass == '3':

		typecar = 'Ø³ÙŠØ§Ø±Ù‡ ØªÙƒØ³ÙŠ'

	if numberclass == '4':

		typecar = 'Ø³ÙŠØ§Ø±Ù‡ Ø­Ù…Ù„'

	if numberclass == '5':

		typecar = 'Ø³ÙŠØ§Ø±Ù‡ Ø²Ø±Ø§Ø¹Ù‡'

	if numberclass == '6':

		typecar = 'Ø³ÙŠØ§Ø±Ù‡ Ø§Ù†Ø´Ø§Ø¦ÙŠÙ‡'

	if numberclass == '7':

		typecar = 'Ø¯Ø±Ø§Ø¬Ø§Øª'

	if numberclass == '8':

		typecar = 'Ø³ÙŠØ§Ø±Ù‡ Ø­ÙƒÙˆÙ…ÙŠÙ‡'

	#This Bot For Free By @s_l_3 - @c_p_8

	coder = bot.send_message(message.chat.id,f'''<strong>

- Ø§ÙˆÙƒ Ø­Ø¨ .

Ø±Ù‚Ù… Ø§Ù„Ø³ÙŠØ§Ø±Ù‡ ( {numbercar} ) .

ØµÙ†Ù Ø§Ù„Ø³ÙŠØ§Ø±Ù‡  (.{typecar} ) .

- Ù‡Ø³Ù‡ Ø§Ø®ØªØ§Ø± Ù…Ø­Ø§ÙØ¶Ù‡ Ø§Ù„Ø³ÙŠØ§Ø±Ø© .

1 - Ø¨ØºØ¯Ø§Ø¯ .

2 - Ù†ÙŠÙ†ÙˆÙ‰ .

3 - Ø¨ØµØ±Ù‡ .

4 - ØµÙ„Ø§Ø­ Ø§Ù„Ø¯ÙŠÙ† .

5 - Ø¯ÙŠØ§Ù„Ù‰ .

6 - Ø§Ù„Ø§Ù†Ø¨Ø§Ø± .

7 - ÙƒØ±Ø¨Ù„Ø§Ø¡ Ø§Ù„Ù…Ù‚Ø¯Ø³Ù‡ .

8 - Ø§Ù„Ù†Ø¬Ù Ø§Ù„Ø§Ø´Ø±Ù .

9 - Ø§Ù„Ù‚Ø§Ø¯Ø³ÙŠÙ‡ .

10 - Ø§Ù„Ù…Ø«Ù†Ù‰ . 

11 - ÙˆØ§Ø³Ø· .

12 - Ù…ÙŠØ³Ø§Ù† . 

13 - Ø°ÙŠ Ù‚Ø§Ø± .

14 - Ø§Ø±Ø¨ÙŠÙ„ .

15 - Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠÙ‡ .

16 - Ø¯Ù‡ÙˆÙƒ .

</strong>''',parse_mode='html')

	bot.register_next_step_handler(coder,getcitycar)

def getcitycar(message):

	global carcity

	citycar = message.text

	if citycar == '1':

		carcity = 'Ø¨ØºØ¯Ø§Ø¯'

	if citycar == '2':

		carcity = 'Ù†ÙŠÙ†ÙˆÙ‰'

	if citycar == '3':

		carcity = 'Ø¨ØµØ±Ù‡'

	if citycar == '4':

		carcity = 'ØµÙ„Ø§Ø­ Ø§Ù„Ø¯ÙŠÙ†'

	if citycar == '5':

		carcity = 'Ø¯ÙŠØ§Ù„Ù‰'

	if citycar == '6':

		carcity = 'Ø§Ù„Ø§Ù†Ø¨Ø§Ø±'

	if citycar == '7':

		carcity = 'ÙƒØ±Ø¨Ù„Ø§Ø¡ Ø§Ù„Ù…Ù‚Ø¯Ø³Ù‡'

	if citycar == '8':

		carcity = 'Ø§Ù„Ù†Ø¬Ù Ø§Ù„Ø§Ø´Ø±Ù'

	if citycar == '9':

		carcity = 'Ø§Ù„Ù‚Ø§Ø¯Ø³ÙŠÙ‡'

	if citycar == '10':

		carcity = 'Ø§Ù„Ù…Ø«Ù†Ù‰'

	if citycar == '11':

		carcity = 'ÙˆØ§Ø³Ø·'

	if citycar == '12':

		carcity = 'Ù…ÙŠØ³Ø§Ù†'

	if citycar == '13':

		carcity = 'Ø°ÙŠ Ù‚Ø§Ø±'

	if citycar == '14':

		carcity = 'Ø§Ø±Ø¨ÙŠÙ„'

	if citycar == '15':

		carcity = 'Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠÙ‡'

	#This Bot For Free By @s_l_3 - @c_p_8

	if citycar == '16':

		carcity = 'Ø¯Ù‡ÙˆÙƒ'

	send = bot.send_message(message.chat.id,f'''<strong>Ø­Ø³Ù†Ø§ Ø¹Ø²ÙŠØ²ÙŠ ğŸ‘€

Ø±Ù‚Ù… Ø§Ù„Ø³ÙŠØ§Ø±Ù‡  : {numbercar} .

ØµÙ†Ù Ø§Ù„Ø³ÙŠØ§Ø±Ù‡ : {typecar} .

Ù…Ø­Ø§ÙØ¶Ù‡ Ø§Ù„Ø³ÙŠØ§Ø±Ù‡ : {carcity} .

- Ø§Ø®ØªØ§Ø± Ø­Ø±Ù Ø§Ù„Ø³ÙŠØ§Ø±Ø© .

1 - ( A  - Ø§ )

2 - ( B  - Ø¨ )

3 - ( j  - Ø¬ )

4 - ( D  - Ø¯ )

5 - ( R  - Ø± )

6 - ( S  - Ø³ )

7 - ( T  - Ø· )

8 - ( F  - Ù )

9 - ( K  - Ùƒ )

10 - ( M  - Ù… )

11 - ( N  - Ù† )

12 - ( H  - Ù‡ )

13 - ( W  - Ùˆ )

14 - ( E  - ÙŠ )

15 - ( L  - Ù„ )

16 - ( Z  - Ø² )

17 - ( Q  - Ù‚ )

18 - ( Ø¨Ù„Ø§ )</strong>''',parse_mode='html')

	bot.register_next_step_handler(send,getinfocar)

	

def getinfocar(message):

	lettercar = message.text

	if lettercar == '1':

		carletter = 'Ø§'

	if lettercar == '2':

		carletter = 'Ø¨'

	if lettercar == '3':

		carletter = 'Ø¬'

	if lettercar == '4':

		carletter = 'Ø¯'

	if lettercar == '5':

		carletter = 'Ø±'

	if lettercar == '6':

		carletter = 'Ø³'

	if lettercar == '7':

		carletter = 'Ø·'

	if lettercar == '8':

		carletter = 'Ù'

	if lettercar == '9':

		carletter = 'Ùƒ'

	if lettercar == '10':

		carletter = 'Ù…'

	if lettercar == '11':

		carletter = 'Ù†'

	if lettercar == '12':

		carletter = 'Ù‡'

	if lettercar == '13':

		carletter = 'Ùˆ'

	#This Bot For Free By @s_l_3 - @c_p_8

	if lettercar == '14':

		carletter = 'ÙŠ'

	if lettercar == '15':

		carletter = 'Ù„'

	if lettercar == '16':

		carletter = 'Ø²'

	if lettercar == '17':

		carletter = 'Ù‚'

	if lettercar == '18':

		carletter = 'old'

	# -- .

	url = 'https://itp.gov.iq/carSearch.php'

	headers = {

		'accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9',

		'accept-encoding': 'gzip, deflate, br',

		'accept-language': 'ar,en;q=0.9,en-GB;q=0.8,en-US;q=0.7',

	  'cache-control': 'no-cache',

	  'content-length': '135',

	  'content-type': 'application/x-www-form-urlencoded',

	  'origin': 'https://itp.gov.iq',

	  'pragma': 'no-cache',

	  'referer': 'https://itp.gov.iq/carSearch.php',

	  'sec-ch-ua': '" Not;A Brand";v="99", "Microsoft Edge";v="103", "Chromium";v="103"' ,

	  'sec-ch-ua-mobile': '?0',

	  'sec-ch-ua-platform': "Windows",

	  'sec-fetch-dest': 'document',

	  'sec-fetch-mode': 'navigate',

	  'sec-fetch-site': 'same-origin',

	

}

	s_l_3 = {

		

		'CarLetter': f'{carletter}',

		'CarNumber': f'{numbercar}',

		'CarType': f'{typecar}',

		'CarReg': f'{carcity}',

		'submit': 'Ø¨Ø­Ø«',

	

}

#This Bot For Free By @s_l_3 - @c_p_8

	req = requests.post(url,headers=headers,data=s_l_3)

	if " - Ù„Ø§ ØªÙˆØ¬Ø¯ ØºØ±Ø§Ù…Ø§Øª Ù…ÙØ±ÙˆØ¶Ù‡ Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ§Ø±Ù‡ - Ø´ÙƒØ±Ø§ Ù„Ø§Ù„ØªØ²Ø§Ù…ÙƒÙ… Ø¨Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø³ÙŠØ± Ø§Ù„Ø§Ù…Ù† ." in req.text:

		bot.send_message(message.chat.id,f'<strong>- Ø¹Ø²ÙŠØ²ÙŠ Ø§Ù„Ø±Ù‚Ù… ( {numbercar} ) Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù„ÙŠÙ‡ Ø§ÙŠ ØºØ±Ø§Ù…Ù‡ Ù…Ø±ÙˆØ±ÙŠÙ‡ .</strong>',parse_mode='html')

	else:

		NumberM = re.findall("<td>(.*?)</td>",req.text)[0]

		MoneyNumber = re.findall("<td>(.*?)</td>",req.text)[1]

		City = re.findall("<td>(.*?)</td>",req.text)[2]

		Time = re.findall("<td>(.*?)</td>",req.text)[3]

		All = re.findall('<td id="blink">(.*?)</td>',req.text)

		bot.send_message(message.chat.id,f'''<strong>

	- Ø§ÙƒÙˆ ØºØ±Ø§Ù…Ù‡ Ø¨Ø§Ù„Ø³ÙŠØ§Ø±Ø© .

- Ø±Ù‚Ù… Ø§Ù„ØºØ±Ø§Ù…Ù‡ : {NumberM} .

- Ù…Ø¨Ù„Øº Ø§Ù„ØºØ±Ø§Ù…Ù‡ : {MoneyNumber} .

- Ù…ÙƒØ§Ù† Ø§Ù„ØºØ±Ø§Ù…Ù‡ : {City} .

- Ø§Ù„ÙˆÙ‚Øª : {Time} .

- Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„ÙƒÙ„ÙŠ : {All} .

- Ù…Ø¨Ø±Ù…Ø¬ Ø§Ù„Ø¨ÙˆØª : @s_l_3 .

	</strong>''',parse_mode='html')

bot.infinity_polling(True)

#This Bot For Free By @s_l_3 - @c_p_8
